<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gqhmt.fss.architect.loan.mapper.read.FssEnterAccountParentReadMapper">

	<sql id="whereSql">
			<if test="mchnNo != null and mchnNo != ''">
				and t.mchn_child = #{mchnNo}
			</if>
			<if test="seqNo != null and seqNo != '' ">
				and t.seq_no = #{seqNo}
			</if>
	</sql>
	<!-- 入账回盘-->
	<select id="getEnterAccountParent"  parameterType="java.util.Map" resultType="com.gqhmt.fss.architect.loan.entity.FssEnterAccountParentEntity" >
		SELECT 
			t.id,
		    t.mchn_child mchnChild,
		    t.seq_no seqNo,
		    t.trade_type tradeType,
			FROM t_gq_fss_enter_account_parent t
			where 1=1
			<include refid="whereSql" />
	</select>
		<!-- 得到入账表 -->
	<select id="getEnterAccountParentList"  parameterType="java.util.Map" resultType="com.gqhmt.fss.architect.loan.entity.FssEnterAccountParentEntity" >
			 SELECT 
			t.id,
		    t.mchn_child mchnChild,
		    t.seq_no seqNo,
		    t.trade_type tradeType,
		    trade_count tradeCount,
		    success_count successCount,
		    filed_count filedCount,
		    state state,
		    result_state resultState,
		    create_time createTime,
		    motify_time motifyTime
			FROM t_gq_fss_enter_account_parent t
			where 1=1
			<if test="state != null and state != ''">
				and t.state like concat('%',#{state},'%')
			</if>
			<if test="tradeType != null and tradeType != ''">
				and t.trade_type like concat('%',#{tradeType},'%')
			</if>
			<if test="mchnChild != null and mchnChild != ''">
				and t.mchn_child like concat('%',#{mchnChild},'%')
			</if>
			group by t.create_time desc
	</select>
</mapper>
