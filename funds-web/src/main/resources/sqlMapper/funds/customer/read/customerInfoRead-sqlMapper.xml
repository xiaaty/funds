<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gqhmt.funds.architect.customer.mapper.read.CustomerInfoReadMapper">
	<sql id="fieldSql">
	</sql>
	<sql id="whereSql">
	</sql>
	<sql id="otherSql">
		<choose>
		<when test="orderStr != null">
			order by ${orderStr}
		</when>
		<otherwise>
		</otherwise>
		</choose>
	</sql>
	<select id="queryCustomerInfoEntityList" parameterType="customerInfoEntity" resultType="customerInfoEntity">
		SELECT t.id id,
			t.CUSTOMER_NAME customerName,
			t.MOBILE_PHONE mobilePhone,
			t.CERT_NO certNo,
			t.CUSTOMER_TYPE customerType,
			t.CERT_TYPE certType,
			t.SEX sex,
			t.BIRTHDATE birthdate,
			t.EDUCATION education,
			t.MARITAL_STATUS maritalStatus,
			t.EMER_CONTACT emerContact,
			t.EMER_CONTACT_MOBILE emerContactMobile
		 FROM `t_gq_customer_info` t
		 <where>
		 	  <if test="customerName != null and customerName != ''">
                and t.CUSTOMER_NAME like CONCAT('%',${customerName},'%') 
              </if>
              <if test="customerType != null and customerType != ''">
                and t.CUSTOMER_TYPE = ${customerType} 
              </if>
              <if test="sex != null and sex != ''">
                and  t.SEX =${sex} 
              </if>
		 </where>
	</select>

	<select id="queryCustomerByCertNo" parameterType="java.lang.String" resultType="customerInfoEntity">
		SELECT t.id id,
		t.CUSTOMER_NAME customerName,
		t.MOBILE_PHONE mobilePhone,
		t.CERT_NO certNo,
		t.CUSTOMER_TYPE customerType,
		t.CERT_TYPE certType,
		t.SEX sex,
		t.user_id userId,
		t.isvalid isvalid,
		t.has_acount hasAccount,
		t.bank_id bankId,
		t.BIRTHDATE birthdate,
		t.EDUCATION education,
		t.MARITAL_STATUS maritalStatus,
		t.EMER_CONTACT emerContact,
		t.EMER_CONTACT_MOBILE emerContactMobile
		FROM `t_gq_customer_info` t
		WHERE t.CERT_NO=#{certNo}
	</select>

</mapper>
